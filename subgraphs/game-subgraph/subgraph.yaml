specVersion: 0.0.4
description: Monolyth Game Subgraph
repository: https://github.com/Reblayzer/Game
schema:
  file: ./schema.graphql

dataSources:
  - kind: ethereum/contract
    name: GameEngine
    network: hydraTestnet
    source:
      address: "0x3FD47Aa00237e644D7C03B6090076Dc5d58A69CC"
      abi: GameEngine
      startBlock: 22901141
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - GamePlayer
        - GamePlot
      abis:
        - name: GameEngine
          file: ../../artifacts/contracts/GameEngine.sol/GameEngine.json
      eventHandlers:
        - event: WorldJoined(indexed address,indexed uint256,uint256)
          handler: handleWorldJoined
        - event: PlotPurchased(indexed address,indexed uint256,uint8,uint8,uint256)
          handler: handlePlotPurchased
        - event: ResourcesUpdated(indexed address,indexed uint256,uint256[5])
          handler: handleResourcesUpdated
        - event: PlotPriceUpdated(indexed address,indexed uint256,uint256)
          handler: handlePlotPriceUpdated
      file: ./src/gameEngineMapping.ts

  - kind: ethereum/contract
    name: PlayerNFT
    network: hydraTestnet
    source:
      address: "0x7Ef1976b1cCd5C5853D9B23b8B05026f13cD5D3a"
      abi: PlayerNFT
      startBlock: 22705000
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - PlayerNFT
        - PlayerWorldStat
      abis:
        - name: PlayerNFT
          file: ../../artifacts/contracts/PlayerNFT.sol/PlayerNFT.json
      eventHandlers:
        - event: PlayerRegistered(indexed address,string,uint256)
          handler: handlePlayerRegistered
        - event: WorldUpdated(indexed address,uint256,uint256,uint256)
          handler: handleWorldUpdated
      file: ./src/playerNFTMapping.ts

  - kind: ethereum/contract
    name: GameWorldFactory
    network: hydraTestnet
    source:
      address: "0xB83Ac8C5c46073Bcc957Bffe5EBD5AbfE2a91937"
      abi: GameWorldFactory
      startBlock: 22727190
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - GameWorld
      abis:
        - name: GameWorldFactory
          file: ../../artifacts/contracts/GameWorldFactory.sol/GameWorldFactory.json
      eventHandlers:
        - event: WorldCreated(indexed address,indexed uint256,string)
          handler: handleWorldCreated
      file: ./src/factoryMapping.ts

templates:
  - name: GameEngineTemplate
    kind: ethereum/contract
    network: hydraTestnet
    source:
      abi: GameEngine
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.6
      language: wasm/assemblyscript
      entities:
        - GamePlayer
        - GamePlot
      abis:
        - name: GameEngine
          file: ../../artifacts/contracts/GameEngine.sol/GameEngine.json
      eventHandlers:
        - event: WorldJoined(indexed address,indexed uint256,uint256)
          handler: handleWorldJoined
        - event: PlotPurchased(indexed address,indexed uint256,uint8,uint8,uint256)
          handler: handlePlotPurchased
      file: ./src/gameEngineMapping.ts
